<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Alex VR Space</title>
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
  </head>
  <body>
    <a-scene
      fog="type: exponential; color: #111111; density: 0.03"
      shadow="type: pcfsoft"
      background="color: #000"
    >
      <!-- Assets -->
      <a-assets>
        <a-asset-item id="ground" src="Alex.assets/models/ground.glb"></a-asset-item>
        <a-asset-item id="palms" src="Alex.assets/models/palms.glb"></a-asset-item>
        <a-asset-item id="cabin" src="Alex.assets/models/cabin.glb"></a-asset-item>
        <a-asset-item id="poster" src="Alex.assets/models/poster.glb"></a-asset-item>
        <a-asset-item id="phoenix" src="Alex.assets/models/phoenix.glb"></a-asset-item>
        <a-asset-item id="portal" src="Alex.assets/models/animatedportal.glb"></a-asset-item>
        <a-asset-item id="mushrooms" src="Alex.assets/models/mushrooms.glb"></a-asset-item>
        <a-asset-item id="rum" src="Alex.assets/models/rum.glb"></a-asset-item>

        <audio id="background-audio" src="Alex.assets/sounds/background.wav" preload="auto" crossorigin="anonymous"></audio>
        <audio id="phoenix-audio" src="Alex.assets/sounds/phoenix.mp3" preload="auto" crossorigin="anonymous"></audio>
        <audio id="rum-audio" src="Alex.assets/sounds/bachata.mp3" preload="auto" crossorigin="anonymous"></audio>
      </a-assets>

      <!-- ðŸ”Š Background Music -->
      <a-entity id="bgMusic" sound="src: #background-audio; loop: true; volume: 0.5"></a-entity>

      <!-- Sky & Lights -->
      <a-sky color="#111111" rotation="0 -90 0"></a-sky>
      <a-entity light="type: ambient; intensity: 1"></a-entity>
      <a-entity
        light="type: directional; intensity: 2; color: #aaccee; castShadow: true"
        position="5 10 5"
        target="#shadow-target"
      ></a-entity>
      <a-entity id="shadow-target" position="0 0 0"></a-entity>

      <!-- Camera -->
      <a-entity position="12 1 1" rotation="0 90 0">
        <a-camera wasd-controls-enabled="true" look-controls-enabled="true">
          <a-cursor fuse="false" raycaster="objects: .clickable"></a-cursor>
        </a-camera>
      </a-entity>

      <!-- World -->
      <a-entity gltf-model="#ground" position="0 0 0"></a-entity>
      <a-entity gltf-model="#palms" position="0 0 0" shadow="cast: true"></a-entity>
      <a-entity gltf-model="#cabin" position="0 0 3" shadow="cast: true; receive: true"></a-entity>
      <a-entity gltf-model="#poster" position="0 0 3"></a-entity>

      <!-- Phoenix -->
      <a-entity
        id="phoenix-container"
        position="0 20 0"
        animation="property: rotation; to: 0 360 0; dur: 30000; loop: true"
      >
        <a-box
          id="phoenix-hitbox"
          class="clickable"
          visible="false"
          depth="3"
          height="3"
          width="3"
          position="10 0 0"
          sound="src: #phoenix-audio; volume: 3"
        ></a-box>
        <a-entity
          gltf-model="#phoenix"
          position="10 0 0"
          rotation="0 90 0"
          scale="0.01 0.01 0.01"
          animation-mixer
          shadow="cast: true"
        ></a-entity>
      </a-entity>

      <!-- Mushrooms -->
      <a-entity id="mushroom-container" position="0 0 2.9">
        <a-box
          id="mushroom-hitbox"
          class="clickable"
          visible="false"
          depth="3"
          height="2"
          width="3"
          position="0 1 0"
          sound="src: #jungle-audio; volume: 1"
        ></a-box>
        <a-entity gltf-model="#mushrooms" position="0 0 0" scale="1 1 1" shadow="cast: true"></a-entity>
      </a-entity>

      <!-- Rum Bottle with larger hitbox -->
      <a-entity id="rum-container" position="0.5 0 2.5">
        <a-box
          id="rum-hitbox"
          class="clickable"
          visible="false"
          depth="1"
          height="2"
          width="1"
          position="-1 1 -9.1"
          sound="src: #rum-audio; volume: 1"
        ></a-box>
        <a-entity
          gltf-model="#rum"
          position="0 0 0"
          scale="1 1 1"
          shadow="cast: true"
        ></a-entity>
      </a-entity>

      <!-- Portal -->
      <a-entity
        id="door-to-fatou"
        class="clickable"
        gltf-model="#portal"
        position="0 0 2.8"
        scale="1 1 1"
        animation-mixer
        shadow="cast: true"
      ></a-entity>

      <!-- Scripts -->
      <script src="Alex.js/Alex.js"></script>
      <script src="shared/door.js"></script>
    </a-scene>
  </body>
</html>